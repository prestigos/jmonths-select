!function(a){"use strict";a.fn.months_selector=function(b,c){var d,e,f,g,h,i,j,k,l,m;if(d=this,g=function(b){var c=[];return d.find(".month.selected").each(function(){c.push(a(this).data("month"))}),b.val(c.join(",")),c},b&&"object"==typeof b){for(f=new Date,m=a.extend({months:f.getMonth()+1,start_year:f.getFullYear(),start_month:f.getMonth()+1,field:"months",special:[]},b),e=a("<input type='hidden' name='"+m.field+"'/>"),d.append(e),h=[],i=m.start_year,j=m.start_month,k="month",l=m.months;l>0;l-=1)k=m.special.indexOf(i+"-"+j)>=0?"month special":"month",h.push("<li class='"+k+"' data-month='"+i+"-"+("0"+j).slice(-2)+"'>"+("0"+j).slice(-2)+"</li>"),1===j||1===l?(d.append("<ul class='year'><li class='year-label'>"+i+"</li>"+h.join("")+"</ul>"),h=[],j=12,i-=1):j-=1;return d.find(".month").click(function(){a(this).toggleClass("selected"),g(e),e.change()}),d.find(".year-label").click(function(){a(this).siblings().each(function(){a(this).toggleClass("selected")}),g(e),e.change()}),d}return b&&"string"==typeof b&&"setSelection"===b?(d.find(".month").each(function(){var b,d;b=a(this),d=b.data("month"),c.indexOf(d)>=0?b.addClass("selected"):b.removeClass("selected")}),g(d.find("input:hidden"))):void 0}}(jQuery);